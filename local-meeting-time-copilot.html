<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Co-pilot local time</title>  
<script>
function convertUTCToLocalTime(utcTime) {
    // Ensure the utcTime is a string of 4 digits
    if (utcTime.length !== 4 || isNaN(utcTime)) {
        console.error("Invalid UTC time format. Expected HHMM.");
        return;
    }

    // Extract hours and minutes from the UTC time
    let utcHours = parseInt(utcTime.substring(0, 2), 10);
    let utcMinutes = parseInt(utcTime.substring(2, 4), 10);

    // Create a new Date object for the current date
    let currentDate = new Date();

    // Set the hours and minutes to the current date object
    currentDate.setUTCHours(utcHours, utcMinutes, 0, 0);

    // Get the local time offset in minutes and convert it to milliseconds
    let offset = -currentDate.getTimezoneOffset() * 60000;

    // Create a new Date object for the local time
    let localTime = new Date(currentDate.getTime() + offset);

    // Extract hours and minutes
    let hours = localTime.getHours();
    let minutes = localTime.getMinutes();

    // Format hours and minutes to always have two digits
    hours = hours.toString().padStart(2, '0');
    minutes = minutes.toString().padStart(2, '0');

    // Get the local timezone name
    let timeZoneName = Intl.DateTimeFormat().resolvedOptions().timeZone;

    // Calculate the time difference in hours
    let timeDifference = -currentDate.getTimezoneOffset() / 60;
    let absTimeDifference = Math.abs(timeDifference);
    let hourWord = absTimeDifference === 1 ? 'hour' : 'hours';
    let timeDifferencePhrase;

    if (timeDifference > 0) {
        timeDifferencePhrase = `${absTimeDifference} ${hourWord} ahead of UTC`;
    } else if (timeDifference < 0) {
        timeDifferencePhrase = `${absTimeDifference} ${hourWord} behind UTC`;
    } else {
        timeDifferencePhrase = 'the same as UTC';
    }

    return `${hours}:${minutes} ${timeZoneName}. The local time is ${timeDifferencePhrase}.`;
}





//document.getElementById("local-timezone").innerHTML = tz; // write local timezone 
//document.getElementById("utc-time-offset").innerHTML = offset;  // write the number of hours UTC offset 
//document.getElementById("utc-meeting-time").innerHTML = utcTime; // write the UTC meeting time  
// document.getElementById("your-meeting-time").innerHTML = localTime; // write the local meeting time, using the appropriate phrasing
//document.getElementById("diff").innerHTML = diff;
//document.getElementById("phrase").innerHTML = phrase;  
</script>

</head>

<body style="font-size: 36px; font-family: Lucida Console;">
<h1>Local meeting time</h1>

<script>
// Example usage:
let urlParams = new URLSearchParams(window.location.search);
let utcTime = urlParams.get('utcTime'); // e.g., "1036"
if (utcTime) {
    let localTime = convertUTCToLocalTime(utcTime);
    console.log("Local Time:", localTime);
} else {
    console.log("No UTC time provided in query string.");
}

</script>

 
</body>
</html>
